import './polyfills.server.mjs';
import{a as ne,b as re,c as ae}from"./chunk-KK563DXA.mjs";import{a as de,b as se,c as me,d as L}from"./chunk-PCHHDNR3.mjs";import{$ as E,B as $,C as Y,L as J,M as T,N as W,T as O,U as u,W as M,X as I,Z as U,aa as ee,ba as S,ca as z,da as te,ea as oe,fa as A,ga as R,ha as V,ia as ce,ja as ie,m as H,na as D,t as K}from"./chunk-JLAFNICJ.mjs";import{Aa as f,Ea as n,F as N,Fa as d,Ga as b,Ha as v,J as C,K as j,Ka as l,La as k,N as g,O as x,Qa as m,Sa as Q,Ua as w,Xb as P,ka as a,la as h,ta as q,ua as s,vb as F,wb as Z,za as p}from"./chunk-K6ROAS7I.mjs";import{g as X}from"./chunk-KRLCULJA.mjs";var le=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=j({type:o}),o.\u0275inj=N({});let e=o;return e})(),be=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=j({type:o}),o.\u0275inj=N({imports:[H,K,le,H,le]});let e=o;return e})();var y=X(me());function fe(e,o){if(e&1){let r=v();n(0,"div",4)(1,"div",8)(2,"input",17),l("input",function(){g(r);let t=k();return x(t.onOtpInput())})("keypress",function(t){g(r);let i=k();return x(i.onlyNumberKey(t))}),d()()()}if(e&2){let r=k();a(2),s("formControl",r.otp)}}function ve(e,o){if(e&1&&(n(0,"div",4)(1,"div",8),b(2,"input",18),d()()),e&2){let r=k();a(2),s("type",r.isHidePassword?"text":"password")("formControl",r.password)}}function ye(e,o){e&1&&(n(0,"span"),m(1,"Get OTP"),d())}function Ce(e,o){e&1&&b(0,"app-loader")}function we(e,o){if(e&1){let r=v();n(0,"button",19),l("click",function(){g(r);let t=k();return x(t.getOtp(!1))}),p(1,ye,2,0,"span",20)(2,Ce,1,0,"app-loader",20),d()}if(e&2){let r=k();s("disabled",r.forgotPasswordForm.invalid),a(),s("ngIf",!r.loader),a(),s("ngIf",r.loader)}}function Fe(e,o){e&1&&(n(0,"span"),m(1,"Submit"),d())}function Pe(e,o){e&1&&b(0,"app-loader")}function Te(e,o){if(e&1){let r=v();n(0,"button",19),l("click",function(){g(r);let t=k();return x(t.forgotPassword())}),p(1,Fe,2,0,"span",20)(2,Pe,1,0,"app-loader",20),d()}if(e&2){let r=k();s("disabled",!r.otp.value),a(),s("ngIf",!r.loader),a(),s("ngIf",r.loader)}}function Oe(e,o){e&1&&(n(0,"span"),m(1,"Reset Password"),d())}function Me(e,o){e&1&&b(0,"app-loader")}function Ie(e,o){if(e&1){let r=v();n(0,"button",19),l("click",function(){g(r);let t=k();return x(t.resetPassword())}),p(1,Oe,2,0,"span",20)(2,Me,1,0,"app-loader",20),d()}if(e&2){let r=k();s("disabled",!r.password.value),a(),s("ngIf",!r.loader),a(),s("ngIf",r.loader)}}function Ee(e,o){if(e&1){let r=v();n(0,"div",15),l("click",function(){g(r);let t=k();return x(t.navigateToRegister())}),m(1," Create Account "),d()}}function Se(e,o){if(e&1){let r=v();n(0,"div",15),l("click",function(){g(r);let t=k();return x(t.getOtp(!0))}),m(1," Resend OTP "),d()}}var ke=(()=>{let o=class o{constructor(c,t,i,_,B){this.matDialogRef=c,this.dialog=t,this.router=i,this.authService=_,this.fb=B,this.isHidePassword=!1,this.isOtpReceived=!1,this.isOtpValidate=!1,this.otp=new U("",[u.required,u.pattern("^[0-9]{4}$")]),this.password=new U("",u.required),this.hideOTP=!0,this.loader=!1,this.isResentOTP=!1,this.forgotPasswordForm=this.fb.group({email:["",[u.required,u.email,u.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]]})}close(){this.matDialogRef.close()}navigateToLogin(){this.close(),this.router.navigateByUrl("/login")}navigateToRegister(){this.close(),this.router.navigateByUrl("/register")}getOtp(c){console.log(c,"isResendOTP"),this.forgotPasswordForm.valid?(c==!1&&(this.loader=!0),this.authService.sendOtp(this.forgotPasswordForm.value).subscribe({next:t=>{this.loader=!1,y.default.fire({toast:!0,text:t.message,animation:!1,icon:"success",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),t&&(this.isOtpReceived=!0,this.hideOTP=!1)},error:t=>{this.loader=!1,y.default.fire({toast:!0,text:t.error.message,animation:!1,icon:"error",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}})):y.default.fire({toast:!0,text:"Email is required",animation:!1,icon:"error",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}forgotPassword(){let c={email:this.forgotPasswordForm.value.email,otp:this.otp.value};this.loader=!0,this.authService.forgotPassword(c).subscribe({next:t=>{this.otpToken=t.token,this.hideOTP=!1,t&&(this.loader=!1,this.hideOTP=!0,this.isOtpValidate=!0)},error:t=>{this.loader=!1,console.log("forgot-api-error",t)}})}resetPassword(){let c={email:this.forgotPasswordForm.value.email,token:this.otpToken,password:this.password.value};this.loader=!0,this.authService.resetPassword(c).subscribe({next:t=>{this.loader=!1,y.default.fire({toast:!0,text:t.message,animation:!1,icon:"success",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),this.matDialogRef.close(),this.router.navigateByUrl("/login")},error:t=>{this.loader=!1,y.default.fire({toast:!0,text:t.error.message,animation:!1,icon:"error",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}})}onlyNumberKey(c){return c.charCode==8||c.charCode==0?null:c.charCode>=48&&c.charCode<=57}onOtpInput(){let t=this.otp.value.replace(/[^0-9]/g,"");t.length>4&&this.otp.setValue(t.substring(0,4))}hidePassword(){this.isHidePassword?this.isHidePassword=!1:this.isHidePassword=!0}validateEmailFormat(){let c=this.forgotPasswordForm.get("email");c.touched&&c.value&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(c.value)?c.setErrors(null):c.setErrors({email:!0}))}};o.\u0275fac=function(t){return new(t||o)(h(J),h(T),h(P),h(L),h(A))},o.\u0275cmp=C({type:o,selectors:[["app-forgot-password"]],standalone:!0,features:[w],decls:28,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12","text-end"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"col-12"],["mat-dialog-title","",1,"text-center"],[3,"formGroup"],["mat-dialog-content","",1,"mt-4"],[1,"form-group"],["type","email","placeholder","user@mail.com","formControlName","email","required","",1,"input-control"],["class","col-12"],["mat-dialog-actions","",1,"text-center"],["type","button","mat-flat-button","","class","btn orange-background-btn-w-100",3,"disabled"],[1,"mt-3"],[1,"d-flex"],[1,"ms-auto","forgot_password",3,"click"],["class","ms-auto forgot_password"],["type","text","pattern","[a-zA-Z]+","placeholder","Enter 4 digit OTP",1,"input-control",3,"formControl","input","keypress"],["placeholder","Password",1,"input-control",3,"type","formControl"],["type","button","mat-flat-button","",1,"btn","orange-background-btn-w-100",3,"disabled","click"],[4,"ngIf"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),l("click",function(){return i.close()}),n(4,"mat-icon"),m(5,"close"),d()()(),n(6,"div",4)(7,"h1",5),m(8),d()()(),n(9,"form",6)(10,"div",7)(11,"div",1)(12,"div",4)(13,"div",8),b(14,"input",9),d()(),p(15,fe,3,1,"div",10)(16,ve,3,2,"div",10),d()(),n(17,"div",11),p(18,we,3,3,"button",12)(19,Te,3,3,"button",12)(20,Ie,3,3,"button",12),n(21,"div",13)(22,"div",14)(23,"div")(24,"div",15),l("click",function(){return i.navigateToLogin()}),m(25," Login "),d()(),p(26,Ee,2,0,"div",16)(27,Se,2,0,"div",16),d()()()()()),t&2&&(a(8),Q(" ",i.isOtpValidate?"Reset Password":i.isOtpReceived?"Enter OTP":"Forgot Password"," "),a(),s("formGroup",i.forgotPasswordForm),a(5),q("readonly",i.isOtpReceived?!0:null),a(),f(15,i.isOtpReceived&&!i.hideOTP?15:-1),a(),f(16,i.isOtpValidate?16:-1),a(2),f(18,!i.isOtpReceived&&!i.isOtpValidate?18:-1),a(),f(19,i.isOtpReceived&&!i.isOtpValidate?19:-1),a(),f(20,i.isOtpValidate?20:-1),a(6),f(26,!i.isOtpReceived&&i.hideOTP?26:-1),a(),f(27,i.isOtpReceived&&!i.hideOTP?27:-1))},dependencies:[be,ae,ne,re,Y,$,V,E,O,M,I,te,oe,ee,S,z,R,D,F,Z],styles:["h1[_ngcontent-%COMP%]{color:var(--dark-grey);font-weight:var(--font-weight-medium);font-size:30px}.container[_ngcontent-%COMP%]{padding:20px 35px 25px}  .mat-mdc-unelevated-button:not(:disabled){background-color:var(--primary-color-orange)!important;color:#fff!important;font-size:14px!important;font-weight:var(--font-weight-medium)!important;height:42px!important}  .mat-mdc-unelevated-button:disabled{background-color:var(--primary-color-orange)!important;color:#fff!important;font-size:14px!important;font-weight:var(--font-weight-medium)!important;height:42px!important}  .mat-mdc-unelevated-button:not(:disabled){background-color:var(--primary-color-orange)!important;color:#fff!important;height:42px!important}  .mat-mdc-unelevated-button:disabled{background-color:var(--primary-color-orange)!important;color:#fff!important}.forgot_password[_ngcontent-%COMP%]{color:#1e73be;cursor:pointer;font-size:16px}.input-group[_ngcontent-%COMP%]{flex-wrap:nowrap;position:relative}.input-group[_ngcontent-%COMP%]   .input-control[_ngcontent-%COMP%]{border-radius:4px!important}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{position:absolute;right:0;height:100%;background-color:#f5f5f5;border-left:none;cursor:pointer;border-radius:4px}  .mat-checkbox-checked .mat-checkbox-background{background-color:var(--primary-color-orange)!important}  .mat-checkbox-indeterminate .mat-checkbox-background{background-color:var(--primary-color-orange)!important}.form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--primary-color-orange)!important;border-color:var(--primary-color-orange)!important}.form-check-label[_ngcontent-%COMP%]{color:var(--dark-grey)}.new-to-vietlist[_ngcontent-%COMP%]{color:var(--dark-grey);font-size:15px}.create-account[_ngcontent-%COMP%]{color:#1e73be;cursor:pointer}@media screen and (max-width: 480px){.container[_ngcontent-%COMP%]{padding:0}}"]});let e=o;return e})();var G=X(me());function ze(e,o){e&1&&b(0,"i",28)}function Ae(e,o){e&1&&b(0,"i",29)}function Re(e,o){e&1&&(n(0,"span"),m(1,"Submit"),d())}function Ve(e,o){e&1&&b(0,"app-loader")}var Et=(()=>{let o=class o{constructor(c,t,i,_,B,pe){this.dialog=c,this.router=t,this.authService=i,this.fb=_,this.localStorage=B,this.userSessionService=pe,this.isHidePassword=!1,this.loader=!1,this.loginForm=this.fb.group({username:["",u.required],password:["",u.required]}),console.log("hello")}forgotPassword(){this.dialog.open(ke,{width:"35%"})}navigateToRegister(){this.router.navigateByUrl("/register")}login(){this.loginForm.valid&&(this.loader=!0,this.authService.login(this.loginForm.value).subscribe({next:c=>{this.loader=!1,this.userSessionService.isSuccessLogin.next(c.status),this.userSessionService.loginToken.next(c.data.token),this.localStorage.saveData("vietlist::session",c.data.token),this.localStorage.saveData("vietlist::userdata",JSON.stringify(c.data.user)),c&&this.router.navigateByUrl("/manage-profile"),G.default.fire({toast:!0,text:"Login Successfully",animation:!1,icon:"success",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},error:c=>{this.loader=!1,console.log(c,"error"),G.default.fire({toast:!0,text:c.error.message,animation:!1,icon:"error",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}}))}hidePassword(){this.isHidePassword?this.isHidePassword=!1:this.isHidePassword=!0}};o.\u0275fac=function(t){return new(t||o)(h(T),h(P),h(L),h(A),h(ie),h(W))},o.\u0275cmp=C({type:o,selectors:[["app-login"]],standalone:!0,features:[w],decls:41,vars:8,consts:[[1,"container-fluid","g-0"],[1,"banner"],[1,"content"],[1,"container","justify-content-center"],[3,"formGroup"],[1,"form-cnt"],[1,"row"],[1,"col-12"],[1,"text-center","form-heading"],[1,"row","mt-4"],[1,"form-group"],["type","text","placeholder","Username or Email","formControlName","username","appFormControlValidation","",1,"input-control",3,"validationMsgId"],[1,"input-group"],["formControlName","password","placeholder","Password",1,"input-control","pwd-control",3,"type"],["id","basic-addon1",1,"input-group-text",3,"click"],["class","fa fa-eye-slash","aria-hidden","true","style","color: #6c757d",4,"ngIf"],["class","fa fa-eye","aria-hidden","true","style","color: #6c757d",4,"ngIf"],[1,"col-12","mt-3"],[1,"d-flex"],[1,"form-check"],["type","checkbox","value","","id","remember",1,"form-check-input"],["for","remember",1,"form-check-label"],[1,"ms-auto","forgot_password",3,"click"],[1,"btn","orange-background-btn-w-100",3,"disabled","click"],[4,"ngIf"],[1,"mt-3"],[1,"new-to-vietlist"],[1,"create-account",3,"click"],["aria-hidden","true",1,"fa","fa-eye-slash",2,"color","#6c757d"],["aria-hidden","true",1,"fa","fa-eye",2,"color","#6c757d"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"section",1)(2,"div",2)(3,"h1"),m(4,"Login"),d()()(),n(5,"div",3)(6,"form",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"h1",8),m(11,"Sign In"),d()()(),n(12,"div",9)(13,"div",7)(14,"div",10),b(15,"input",11),d()(),n(16,"div",7)(17,"div",12),b(18,"input",13),n(19,"span",14),l("click",function(){return i.hidePassword()}),p(20,ze,1,0,"i",15)(21,Ae,1,0,"i",16),d()()(),n(22,"div",17)(23,"div",10)(24,"div",18)(25,"div")(26,"div",19),b(27,"input",20),n(28,"label",21),m(29," Remember me "),d()()(),n(30,"div",22),l("click",function(){return i.forgotPassword()}),m(31," Forgot Password ? "),d()()()(),n(32,"div",7)(33,"button",23),l("click",function(){return i.login()}),p(34,Re,2,0,"span",24)(35,Ve,1,0,"app-loader",24),d()(),n(36,"div",25)(37,"p",26),m(38," New to Vietlist? "),n(39,"span",27),l("click",function(){return i.navigateToRegister()}),m(40,"Create account"),d()()()()()()()()),t&2&&(a(6),s("formGroup",i.loginForm),a(9),s("validationMsgId","username-required-msg"),a(3),s("type",i.isHidePassword?"text":"password"),a(2),s("ngIf",!i.isHidePassword),a(),s("ngIf",i.isHidePassword),a(12),s("disabled",!i.loginForm.valid),a(),s("ngIf",!i.loader),a(),s("ngIf",i.loader))},dependencies:[de,se,R,E,O,M,I,V,S,z,F,ce,D],styles:['.mat-mdc-select-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor;position:absolute;top:0!important;left:50%;transform:translate(-50%,-50%)}.mat-mdc-select[_ngcontent-%COMP%]{background:#f5f5f5;border:solid 1px rgba(128,128,128,.1882352941);height:40px;padding:10px;border-radius:4px;width:100%}.mat-mdc-select[_ngcontent-%COMP%]:focus{outline:solid 2px var(--primary-color-orange);border:none}.orange-background-btn[_ngcontent-%COMP%]{background:var(--primary-color-orange);width:fit-content;padding:10px 42px;color:var(--light-grey-2)}.orange-background-btn-w-100[_ngcontent-%COMP%]{background:var(--primary-color-orange);width:100%;padding:10px 42px;color:var(--light-grey-2);font-size:16px}.orange-background-btn-w-100[_ngcontent-%COMP%]:hover{background:var(--primary-color-orange);color:var(--light-grey-2)}.grey-bg-btn[_ngcontent-%COMP%]{width:12em;height:46px;border-radius:4px;background-color:var(--light-grey);color:var(--primary-color-mustard);font-size:16px;line-height:27px;transition:background-color .3s cubic-bezier(.68,-.55,.27,1.55),transform .3s ease}.input-control[_ngcontent-%COMP%]{width:100%;background:#f5f5f5;border:solid 1px rgba(128,128,128,.1882352941);height:40px;padding:10px;border-radius:4px}.input-control[_ngcontent-%COMP%]:focus{outline:solid 2px var(--primary-color-orange);border:none}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.profile-heading[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--dark-grey)}.banner[_ngcontent-%COMP%]{height:450px;width:100%;position:relative;background-image:url(/assets/resgister-banner-img.jpeg);display:flex;justify-content:center;align-items:center}.banner[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#121212cb;z-index:1}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:center;margin-top:22px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:var(--font-weight-medium);color:var(--light-grey);font-size:48px}.container[_ngcontent-%COMP%]{margin:5rem auto;display:flex;align-items:center}.form-cnt[_ngcontent-%COMP%]{margin:auto;height:auto;box-shadow:0 3px 15px #00000012!important;width:100%;max-width:500px;padding:35px 25px}.input-group[_ngcontent-%COMP%]{flex-wrap:nowrap;position:relative}.input-group[_ngcontent-%COMP%]   .input-control[_ngcontent-%COMP%]{border-radius:4px!important}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{position:absolute;right:0;height:100%;background-color:#f5f5f5;border-left:none;cursor:pointer;border-radius:4px}.mat-mdc-radio-button[_ngcontent-%COMP%] ~ .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-left:12px}.form-heading[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--dark-grey)}.forgot_password[_ngcontent-%COMP%]{color:#1e73be;cursor:pointer}  .mat-checkbox-checked .mat-checkbox-background{background-color:var(--primary-color-orange)!important}  .mat-checkbox-indeterminate .mat-checkbox-background{background-color:var(--primary-color-orange)!important}.form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--primary-color-orange)!important;border-color:var(--primary-color-orange)!important}.form-check-label[_ngcontent-%COMP%]{color:var(--dark-grey)}.new-to-vietlist[_ngcontent-%COMP%]{color:var(--dark-grey);font-size:15px;margin:0 auto;width:fit-content}.create-account[_ngcontent-%COMP%]{color:#1e73be;cursor:pointer}']});let e=o;return e})();export{Et as LoginComponent};
