import './polyfills.server.mjs';
import{a as oe,b as ce,c as ie}from"./chunk-LBWAXHAK.mjs";import{a as me,b as le,c as he,d as L}from"./chunk-UDXLMKJC.mjs";import{B as W,C as ee,L as te,M as T,P as O,m as H,t as J}from"./chunk-WANUTCZ7.mjs";import"./chunk-BC2VLBUP.mjs";import{f as M,g as u,i as I,j as E,l as U,n as S,o as re,p as z,q as A,r as ne,s as ae,t as R,u as V,v as D,w as de,x as se}from"./chunk-HABU6LQ6.mjs";import{Aa as p,Ba as f,E as K,F as j,Fa as r,Ga as d,Ha as b,Ia as v,J as C,K as N,La as l,Ma as k,N as g,O as x,Qb as P,Ra as m,Ta as $,Va as w,d as Z,la as a,ma as h,ua as q,va as s,wb as F,xb as Y}from"./chunk-LPAZPEAH.mjs";import{g as Q}from"./chunk-KRLCULJA.mjs";var be=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=N({type:t}),t.\u0275inj=j({});let e=t;return e})(),ke=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=N({type:t}),t.\u0275inj=j({imports:[H,J,be,H,be]});let e=t;return e})();var y=Q(he());function ye(e,t){if(e&1){let n=v();r(0,"div",4)(1,"div",8)(2,"input",17),l("input",function(){g(n);let o=k();return x(o.onOtpInput())})("keypress",function(o){g(n);let i=k();return x(i.onlyNumberKey(o))}),d()()()}if(e&2){let n=k();a(2),s("formControl",n.otp)}}function Ce(e,t){if(e&1&&(r(0,"div",4)(1,"div",8),b(2,"input",18),d()()),e&2){let n=k();a(2),s("type",n.isHidePassword?"text":"password")("formControl",n.password)}}function we(e,t){e&1&&(r(0,"span"),m(1,"Get OTP"),d())}function Fe(e,t){e&1&&b(0,"app-loader")}function Pe(e,t){if(e&1){let n=v();r(0,"button",19),l("click",function(){g(n);let o=k();return x(o.getOtp(!1))}),p(1,we,2,0,"span",20)(2,Fe,1,0,"app-loader",20),d()}if(e&2){let n=k();s("disabled",n.forgotPasswordForm.invalid),a(),s("ngIf",!n.loader),a(),s("ngIf",n.loader)}}function Te(e,t){e&1&&(r(0,"span"),m(1,"Submit"),d())}function Oe(e,t){e&1&&b(0,"app-loader")}function Me(e,t){if(e&1){let n=v();r(0,"button",19),l("click",function(){g(n);let o=k();return x(o.forgotPassword())}),p(1,Te,2,0,"span",20)(2,Oe,1,0,"app-loader",20),d()}if(e&2){let n=k();s("disabled",!n.otp.value),a(),s("ngIf",!n.loader),a(),s("ngIf",n.loader)}}function Ie(e,t){e&1&&(r(0,"span"),m(1,"Reset Password"),d())}function Ee(e,t){e&1&&b(0,"app-loader")}function Se(e,t){if(e&1){let n=v();r(0,"button",19),l("click",function(){g(n);let o=k();return x(o.resetPassword())}),p(1,Ie,2,0,"span",20)(2,Ee,1,0,"app-loader",20),d()}if(e&2){let n=k();s("disabled",!n.password.value),a(),s("ngIf",!n.loader),a(),s("ngIf",n.loader)}}function ze(e,t){if(e&1){let n=v();r(0,"div",15),l("click",function(){g(n);let o=k();return x(o.navigateToRegister())}),m(1," Create Account "),d()}}function Ae(e,t){if(e&1){let n=v();r(0,"div",15),l("click",function(){g(n);let o=k();return x(o.getOtp(!0))}),m(1," Resend OTP "),d()}}var pe=(()=>{let t=class t{constructor(c,o,i,_,B){this.matDialogRef=c,this.dialog=o,this.router=i,this.authService=_,this.fb=B,this.isHidePassword=!1,this.isOtpReceived=!1,this.isOtpValidate=!1,this.otp=new U("",[u.required,u.pattern("^[0-9]{4}$")]),this.password=new U("",u.required),this.hideOTP=!0,this.loader=!1,this.isResentOTP=!1,this.forgotPasswordForm=this.fb.group({email:["",[u.required,u.email,u.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]]})}close(){this.matDialogRef.close()}navigateToLogin(){this.close(),this.router.navigateByUrl("/login")}navigateToRegister(){this.close(),this.router.navigateByUrl("/register")}getOtp(c){console.log(c,"isResendOTP"),this.forgotPasswordForm.valid?(c==!1&&(this.loader=!0),this.authService.sendOtp(this.forgotPasswordForm.value).subscribe({next:o=>{this.loader=!1,y.default.fire({toast:!0,text:o.message,animation:!1,icon:"success",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),o&&(this.isOtpReceived=!0,this.hideOTP=!1)},error:o=>{this.loader=!1,y.default.fire({toast:!0,text:o.error.message,animation:!1,icon:"error",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}})):y.default.fire({toast:!0,text:"Email is required",animation:!1,icon:"error",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}forgotPassword(){let c={email:this.forgotPasswordForm.value.email,otp:this.otp.value};this.loader=!0,this.authService.forgotPassword(c).subscribe({next:o=>{this.otpToken=o.token,this.hideOTP=!1,o&&(this.loader=!1,this.hideOTP=!0,this.isOtpValidate=!0)},error:o=>{this.loader=!1,console.log("forgot-api-error",o)}})}resetPassword(){let c={email:this.forgotPasswordForm.value.email,token:this.otpToken,password:this.password.value};this.loader=!0,this.authService.resetPassword(c).subscribe({next:o=>{this.loader=!1,y.default.fire({toast:!0,text:o.message,animation:!1,icon:"success",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),this.matDialogRef.close(),this.router.navigateByUrl("/login")},error:o=>{this.loader=!1,y.default.fire({toast:!0,text:o.error.message,animation:!1,icon:"error",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}})}onlyNumberKey(c){return c.charCode==8||c.charCode==0?null:c.charCode>=48&&c.charCode<=57}onOtpInput(){let o=this.otp.value.replace(/[^0-9]/g,"");o.length>4&&this.otp.setValue(o.substring(0,4))}hidePassword(){this.isHidePassword?this.isHidePassword=!1:this.isHidePassword=!0}validateEmailFormat(){let c=this.forgotPasswordForm.get("email");c.touched&&c.value&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(c.value)?c.setErrors(null):c.setErrors({email:!0}))}};t.\u0275fac=function(o){return new(o||t)(h(te),h(T),h(P),h(L),h(R))},t.\u0275cmp=C({type:t,selectors:[["app-forgot-password"]],standalone:!0,features:[w],decls:28,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12","text-end"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"col-12"],["mat-dialog-title","",1,"text-center"],[3,"formGroup"],["mat-dialog-content","",1,"mt-4"],[1,"form-group"],["type","email","placeholder","user@mail.com","formControlName","email","required","",1,"input-control"],["class","col-12"],["mat-dialog-actions","",1,"text-center"],["type","button","mat-flat-button","","class","btn orange-background-btn-w-100",3,"disabled"],[1,"mt-3"],[1,"d-flex"],[1,"ms-auto","forgot_password",3,"click"],["class","ms-auto forgot_password"],["type","text","pattern","[a-zA-Z]+","placeholder","Enter 4 digit OTP",1,"input-control",3,"formControl","input","keypress"],["placeholder","Password",1,"input-control",3,"type","formControl"],["type","button","mat-flat-button","",1,"btn","orange-background-btn-w-100",3,"disabled","click"],[4,"ngIf"]],template:function(o,i){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),l("click",function(){return i.close()}),r(4,"mat-icon"),m(5,"close"),d()()(),r(6,"div",4)(7,"h1",5),m(8),d()()(),r(9,"form",6)(10,"div",7)(11,"div",1)(12,"div",4)(13,"div",8),b(14,"input",9),d()(),p(15,ye,3,1,"div",10)(16,Ce,3,2,"div",10),d()(),r(17,"div",11),p(18,Pe,3,3,"button",12)(19,Me,3,3,"button",12)(20,Se,3,3,"button",12),r(21,"div",13)(22,"div",14)(23,"div")(24,"div",15),l("click",function(){return i.navigateToLogin()}),m(25," Login "),d()(),p(26,ze,2,0,"div",16)(27,Ae,2,0,"div",16),d()()()()()),o&2&&(a(8),$(" ",i.isOtpValidate?"Reset Password":i.isOtpReceived?"Enter OTP":"Forgot Password"," "),a(),s("formGroup",i.forgotPasswordForm),a(5),q("readonly",i.isOtpReceived?!0:null),a(),f(15,i.isOtpReceived&&!i.hideOTP?15:-1),a(),f(16,i.isOtpValidate?16:-1),a(2),f(18,!i.isOtpReceived&&!i.isOtpValidate?18:-1),a(),f(19,i.isOtpReceived&&!i.isOtpValidate?19:-1),a(),f(20,i.isOtpValidate?20:-1),a(6),f(26,!i.isOtpReceived&&i.hideOTP?26:-1),a(),f(27,i.isOtpReceived&&!i.hideOTP?27:-1))},dependencies:[ke,ie,oe,ce,ee,W,D,S,M,I,E,ne,ae,re,z,A,V,O,F,Y],styles:["h1[_ngcontent-%COMP%]{color:var(--dark-grey);font-weight:var(--font-weight-medium);font-size:30px}.container[_ngcontent-%COMP%]{padding:20px 35px 25px}  .mat-mdc-unelevated-button:not(:disabled){background-color:var(--primary-color-orange)!important;color:#fff!important;font-size:14px!important;font-weight:var(--font-weight-medium)!important;height:42px!important}  .mat-mdc-unelevated-button:disabled{background-color:var(--primary-color-orange)!important;color:#fff!important;font-size:14px!important;font-weight:var(--font-weight-medium)!important;height:42px!important}  .mat-mdc-unelevated-button:not(:disabled){background-color:var(--primary-color-orange)!important;color:#fff!important;height:42px!important}  .mat-mdc-unelevated-button:disabled{background-color:var(--primary-color-orange)!important;color:#fff!important}.forgot_password[_ngcontent-%COMP%]{color:#1e73be;cursor:pointer;font-size:16px}.input-group[_ngcontent-%COMP%]{flex-wrap:nowrap;position:relative}.input-group[_ngcontent-%COMP%]   .input-control[_ngcontent-%COMP%]{border-radius:4px!important}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{position:absolute;right:0;height:100%;background-color:#f5f5f5;border-left:none;cursor:pointer;border-radius:4px}  .mat-checkbox-checked .mat-checkbox-background{background-color:var(--primary-color-orange)!important}  .mat-checkbox-indeterminate .mat-checkbox-background{background-color:var(--primary-color-orange)!important}.form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--primary-color-orange)!important;border-color:var(--primary-color-orange)!important}.form-check-label[_ngcontent-%COMP%]{color:var(--dark-grey)}.new-to-vietlist[_ngcontent-%COMP%]{color:var(--dark-grey);font-size:15px}.create-account[_ngcontent-%COMP%]{color:#1e73be;cursor:pointer}@media screen and (max-width: 480px){.container[_ngcontent-%COMP%]{padding:0}}"]});let e=t;return e})();var X=Q(he());var ue=(()=>{let t=class t{constructor(){this.loginToken=new Z("")}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ve(e,t){e&1&&b(0,"i",28)}function De(e,t){e&1&&b(0,"i",29)}function Le(e,t){e&1&&(r(0,"span"),m(1,"Submit"),d())}function Be(e,t){e&1&&b(0,"app-loader")}var At=(()=>{let t=class t{constructor(c,o,i,_,B,_e){this.dialog=c,this.router=o,this.authService=i,this.fb=_,this.localStorage=B,this.userSessionService=_e,this.isHidePassword=!1,this.loader=!1,this.loginForm=this.fb.group({username:["",u.required],password:["",u.required]}),console.log("hello")}forgotPassword(){this.dialog.open(pe,{width:"35%"})}navigateToRegister(){this.router.navigateByUrl("/register")}login(){this.loginForm.valid&&(this.loader=!0,this.authService.login(this.loginForm.value).subscribe({next:c=>{this.loader=!1,this.userSessionService.loginToken.next(c.data.token),this.localStorage.saveData("vietlist::session",c.data.token),this.localStorage.saveData("vietlist::userdata",JSON.stringify(c.data.user)),this.router.navigateByUrl("/manage-profile"),X.default.fire({toast:!0,text:"Login Successfully",animation:!1,icon:"success",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},error:c=>{this.loader=!1,console.log(c,"error"),X.default.fire({toast:!0,text:c.error.message,animation:!1,icon:"error",position:"top-right",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}}))}hidePassword(){this.isHidePassword?this.isHidePassword=!1:this.isHidePassword=!0}};t.\u0275fac=function(o){return new(o||t)(h(T),h(P),h(L),h(R),h(se),h(ue))},t.\u0275cmp=C({type:t,selectors:[["app-login"]],standalone:!0,features:[w],decls:41,vars:8,consts:[[1,"container-fluid","g-0"],[1,"banner"],[1,"content"],[1,"container","justify-content-center"],[3,"formGroup"],[1,"form-cnt"],[1,"row"],[1,"col-12"],[1,"text-center","form-heading"],[1,"row","mt-4"],[1,"form-group"],["type","text","placeholder","Username or Email","formControlName","username","appFormControlValidation","",1,"input-control",3,"validationMsgId"],[1,"input-group"],["formControlName","password","placeholder","Password",1,"input-control","pwd-control",3,"type"],["id","basic-addon1",1,"input-group-text",3,"click"],["class","fa fa-eye-slash","aria-hidden","true","style","color: #6c757d",4,"ngIf"],["class","fa fa-eye","aria-hidden","true","style","color: #6c757d",4,"ngIf"],[1,"col-12","mt-3"],[1,"d-flex"],[1,"form-check"],["type","checkbox","value","","id","remember",1,"form-check-input"],["for","remember",1,"form-check-label"],[1,"ms-auto","forgot_password",3,"click"],[1,"btn","orange-background-btn-w-100",3,"disabled","click"],[4,"ngIf"],[1,"mt-3"],[1,"new-to-vietlist"],[1,"create-account",3,"click"],["aria-hidden","true",1,"fa","fa-eye-slash",2,"color","#6c757d"],["aria-hidden","true",1,"fa","fa-eye",2,"color","#6c757d"]],template:function(o,i){o&1&&(r(0,"div",0)(1,"section",1)(2,"div",2)(3,"h1"),m(4,"Login"),d()()(),r(5,"div",3)(6,"form",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"h1",8),m(11,"Sign In"),d()()(),r(12,"div",9)(13,"div",7)(14,"div",10),b(15,"input",11),d()(),r(16,"div",7)(17,"div",12),b(18,"input",13),r(19,"span",14),l("click",function(){return i.hidePassword()}),p(20,Ve,1,0,"i",15)(21,De,1,0,"i",16),d()()(),r(22,"div",17)(23,"div",10)(24,"div",18)(25,"div")(26,"div",19),b(27,"input",20),r(28,"label",21),m(29," Remember me "),d()()(),r(30,"div",22),l("click",function(){return i.forgotPassword()}),m(31," Forgot Password ? "),d()()()(),r(32,"div",7)(33,"button",23),l("click",function(){return i.login()}),p(34,Le,2,0,"span",24)(35,Be,1,0,"app-loader",24),d()(),r(36,"div",25)(37,"p",26),m(38," New to Vietlist? "),r(39,"span",27),l("click",function(){return i.navigateToRegister()}),m(40,"Create account"),d()()()()()()()()),o&2&&(a(6),s("formGroup",i.loginForm),a(9),s("validationMsgId","username-required-msg"),a(3),s("type",i.isHidePassword?"text":"password"),a(2),s("ngIf",!i.isHidePassword),a(),s("ngIf",i.isHidePassword),a(12),s("disabled",!i.loginForm.valid),a(),s("ngIf",!i.loader),a(),s("ngIf",i.loader))},dependencies:[me,le,V,S,M,I,E,D,z,A,F,de,O],styles:['.mat-mdc-select-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor;position:absolute;top:0!important;left:50%;transform:translate(-50%,-50%)}.mat-mdc-select[_ngcontent-%COMP%]{background:#f5f5f5;border:solid 1px rgba(128,128,128,.1882352941);height:40px;padding:10px;border-radius:4px;width:100%}.mat-mdc-select[_ngcontent-%COMP%]:focus{outline:solid 2px var(--primary-color-orange);border:none}.orange-background-btn[_ngcontent-%COMP%]{background:var(--primary-color-orange);width:fit-content;padding:10px 42px;color:var(--light-grey-2)}.orange-background-btn-w-100[_ngcontent-%COMP%]{background:var(--primary-color-orange);width:100%;padding:10px 42px;color:var(--light-grey-2);font-size:16px}.orange-background-btn-w-100[_ngcontent-%COMP%]:hover{background:var(--primary-color-orange);color:var(--light-grey-2)}.grey-bg-btn[_ngcontent-%COMP%]{width:12em;height:46px;border-radius:4px;background-color:var(--light-grey);color:var(--primary-color-mustard);font-size:16px;line-height:27px;transition:background-color .3s cubic-bezier(.68,-.55,.27,1.55),transform .3s ease}.input-control[_ngcontent-%COMP%]{width:100%;background:#f5f5f5;border:solid 1px rgba(128,128,128,.1882352941);height:40px;padding:10px;border-radius:4px}.input-control[_ngcontent-%COMP%]:focus{outline:solid 2px var(--primary-color-orange);border:none}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.profile-heading[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--dark-grey)}.banner[_ngcontent-%COMP%]{height:450px;width:100%;position:relative;background-image:url(/assets/resgister-banner-img.jpeg);display:flex;justify-content:center;align-items:center}.banner[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#121212cb;z-index:1}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:center;margin-top:22px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:var(--font-weight-medium);color:var(--light-grey);font-size:48px}.container[_ngcontent-%COMP%]{margin:5rem auto;display:flex;align-items:center}.form-cnt[_ngcontent-%COMP%]{margin:auto;height:auto;box-shadow:0 3px 15px #00000012!important;width:100%;max-width:500px;padding:35px 25px}.input-group[_ngcontent-%COMP%]{flex-wrap:nowrap;position:relative}.input-group[_ngcontent-%COMP%]   .input-control[_ngcontent-%COMP%]{border-radius:4px!important}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{position:absolute;right:0;height:100%;background-color:#f5f5f5;border-left:none;cursor:pointer;border-radius:4px}.mat-mdc-radio-button[_ngcontent-%COMP%] ~ .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-left:12px}.form-heading[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--dark-grey)}.forgot_password[_ngcontent-%COMP%]{color:#1e73be;cursor:pointer}  .mat-checkbox-checked .mat-checkbox-background{background-color:var(--primary-color-orange)!important}  .mat-checkbox-indeterminate .mat-checkbox-background{background-color:var(--primary-color-orange)!important}.form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--primary-color-orange)!important;border-color:var(--primary-color-orange)!important}.form-check-label[_ngcontent-%COMP%]{color:var(--dark-grey)}.new-to-vietlist[_ngcontent-%COMP%]{color:var(--dark-grey);font-size:15px;margin:0 auto;width:fit-content}.create-account[_ngcontent-%COMP%]{color:#1e73be;cursor:pointer}']});let e=t;return e})();export{At as LoginComponent};
